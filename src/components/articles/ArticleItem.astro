---
import { formatDate } from '@/utils/formatDate';
import { IoArrowForward } from 'react-icons/io5';
import type { ArticleInterface } from '@/@types/types';

const { article, section } = Astro.props as {
  article: ArticleInterface;
  section: string;
};

const ArrowIcon = IoArrowForward;

if (!article) {
  throw new Error('Article prop is required for ArticleItem component');
}
if (!section) {
  throw new Error('section prop is required for ArticleItem component');
}
const authorsList = article.authors.join(', ');
---

<article
  class="flex flex-col md:flex-row gap-6 bg-shark-900 text-shark-50 rounded-xl shadow-lg shadow-black/40 overflow-hidden md:h-68"
>
  <div class="md:w-1/3 shrink-0">
    <img
      src={article.coverPictureUrl}
      alt={article.coverPictureAlt}
      class="w-full h-full object-cover"
      loading="lazy"
    />
  </div>

  <div class="p-4 md:p-6 flex flex-col justify-between md:w-2/3 space-y-3">
    <div class="space-y-2">
      <h2 class="text-xl md:text-2xl font-semibold text-shark-50">
        {article.title}
      </h2>

      <p class="text-sm text-shark-300">
        Publi√© le&nbsp;: {formatDate(article.date)}
      </p>

      <p class="text-xs text-shark-200 line-clamp-3">
        {article.summary}
      </p>
    </div>

    <div class="inline-flex">
      <a
        href={`/${section}/articles/${article.slug}`}
        class="cta-button bg-red-orange-500 hover:bg-red-orange-600 text-shark-50 inline-flex items-center gap-2"
      >
        <span>Lire la suite</span>
        <ArrowIcon />
      </a>
    </div>
  </div>
</article>
