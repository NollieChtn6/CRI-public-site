---
import type { GalleryInterface } from '@/@types/types';
import { formatDate } from '@/utils/formatDate';
import Tag from '@/atoms/Tag.astro';
import { IoArrowForward } from 'react-icons/io5';

const ArrowIcon = IoArrowForward;
const gallery = Astro.props as GalleryInterface;
const cover = gallery.pictures[0];
---

<article
  class="flex flex-col md:flex-row gap-6 bg-white rounded-xl shadow-lg overflow-hidden md:h-60"
>
  <div class="md:w-1/3 shrink-0">
    <img
      src={cover.url}
      alt={cover.alt}
      class="w-full h-full object-cover"
      loading="lazy"
    />
  </div>

  <div class="p-6 flex flex-col justify-between md:w-2/3">
    <div class="space-y-3">
      <h2 class="text-xl font-semibold leading-snug">
        {gallery.title} ({gallery.department})
      </h2>

      {
        gallery.authors.length > 0 ? (
          <p class="text-sm text-gray-500">Par {gallery.authors.join(', ')}</p>
        ) : (
          <p class="text-sm text-gray-500">Par {gallery.authors[0]}</p>
        )
      }

      <p class="text-gray-700 line-clamp-3">
        {gallery.description}
      </p>
    </div>

    <div class="inline-flex">
      <a
        href={`/reportages/galeries/${gallery.tag}/${gallery.slug}`}
        class="cta-button items-center gap-1"
      >
        <span>DÃ©couvrir le reportage</span>
        <ArrowIcon /></a
      >
    </div>
  </div>
</article>
