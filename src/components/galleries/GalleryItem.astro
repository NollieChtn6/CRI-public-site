---
import type { GalleryInterface } from '@/@types/types';
import { formatDate } from '@/utils/formatDate';
import Tag from '@/atoms/Tag.astro';
import { IoArrowForward } from 'react-icons/io5';

const ArrowIcon = IoArrowForward;
const gallery = Astro.props as GalleryInterface;
const cover = gallery.pictures[0];
---

<article
  class="flex flex-col md:flex-row gap-6 bg-shark-900 text-shark-50 rounded-xl shadow-lg shadow-black/40 overflow-hidden md:h-60 hover:scale-105 transition-transform duration-200"
>
  <div class="md:w-1/3 shrink-0 relative">
    <img
      src={cover.url}
      alt={cover.alt}
      class="w-full h-full object-cover"
      loading="lazy"
    />
    <div class="absolute top-3 left-3">
      <Tag
        label={gallery.tag}
        url={`/reportages/galeries/${gallery.tag}`}
        color="red-orange-500"
      />
    </div>
  </div>

  <div class="p-4 md:p-6 flex flex-col justify-between md:w-2/3 space-y-3">
    <div class="space-y-2">
      <h2 class="text-xl md:text-2xl font-semibold leading-snug text-shark-50">
        {gallery.title} ({gallery.department})
      </h2>

      {
        gallery.authors.length > 0 && (
          <p class="text-sm text-shark-300">Par {gallery.authors.join(', ')}</p>
        )
      }

      <p class="text-sm text-shark-200 line-clamp-3">
        {gallery.description}
      </p>
    </div>

    <div class="inline-flex">
      <a
        href={`/reportages/galeries/${gallery.tag}/${gallery.slug}`}
        class="cta-button bg-red-orange-500 hover:bg-red-orange-600 text-shark-50 inline-flex items-center gap-2"
      >
        <span>DÃ©couvrir le reportage</span>
        <ArrowIcon />
      </a>
    </div>
  </div>
</article>
