---
import Tag from '@/atoms/Tag.astro';
import { formatDate } from '@/utils/formatDate';
import { IoArrowForward } from 'react-icons/io5';
import type { GalleryInterface } from '@/@types/types';
import { Image } from 'astro:assets';
import ImageWithPlaceholder from '@/atoms/ImageWithPlaceholder.astro';

const ArrowIcon = IoArrowForward;
const gallery = Astro.props as GalleryInterface;
const cover = gallery.pictures[0];
---

<article
  class="card bg-shark-900 text-shark-50 rounded-xl shadow-lg shadow-black/40 overflow-hidden hover:scale-105 transition-transform duration-200"
>
  <div class="relative">
    <ImageWithPlaceholder
      src={cover.url}
      alt={cover.alt}
      width={1500}
      height={1000}
      class="w-full h-52 object-cover rounded-t-xl"
    />
    <div class="absolute top-3 left-3">
      <Tag
        label={gallery.tag}
        url={`/reportages/galeries/${gallery.tag}`}
        color="red-orange-500"
      />
    </div>
  </div>

  <div class="p-4 md:p-6 space-y-2">
    <h3 class="text-lg md:text-xl font-semibold line-clamp-2">
      {gallery.title} ({gallery.department})
    </h3>
    <p class="text-sm text-shark-300">
      Par {gallery.authors.join(', ')} • Publié le {formatDate(gallery.date)}
    </p>
    <p class="text-sm text-shark-200 line-clamp-3">
      {gallery.description}
    </p>
  </div>

  <div class="flex justify-end p-4 md:p-6">
    <a
      href={`/reportages/galeries/${gallery.tag}/${gallery.slug}`}
      class="cta-button"
    >
      <span>Voir le reportage</span>
      <IoArrowForward />
    </a>
  </div>
</article>
